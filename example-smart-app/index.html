<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv='X-UA-Compatible' content='IE=edge' />
    <meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
    <title>HealthMap-SMART-App</title>

    <link rel='stylesheet' type='text/css' href='./src/css/example-smart-app.css'>
     <link rel='stylesheet' type='text/css' href='./src/css/jquery.dynatable.css'>
	  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  </head>
  <body style="margin-left:10px;margin-right:10px">
    <div id='errors'>
    </div>
    <div id="loading" class="spinner">
      <div class="bounce1"></div>
      <div class="bounce2"></div>
      <div class="bounce3"></div>
    </div>
    <div id='holder' >
      <img src="./src/images/healthmap_ccm_logo.png" alt="HealthMap Solutions" style="width:300px;margin-left: -23px;">
	    
      <img src="./src/images/cerner_logo.png" alt="Cerner" style="width: 250px;float:right;margin-top: 20px;margin-right: 25px;">
     
     
      <div id="patientData" style="border-top-color: #f47f42;
    border-top-style: solid;
    padding: 5px;
    border-radius: 7px;
    background-color: #005d99;
    width: 50%;
    margin-bottom: 10px;"> 
	      <h4 style="color:white;font-size: 20px;font-weight: bold;padding-bottom: 5px;"><span id="fullName"></span></h4> 
	      <h4 style="color:white;font-size: 15px;"> <strong>Home Address: </strong><span id="address"></span> </h4>
	      <h4 style="color:white;font-size: 15px;"> <strong><span id='age'></span> years <span id='gender'></span></strong> DOB: <span id='birthdate'/> </h4>
	    
	      <h4 style="color:white;font-size: 15px;">Physician: <strong><span id='physician'/></strong></h4> 
	     
      </div>
	
      <div id="tabs">
		<ul>
		    <li class="tab-selected"><a href="#tabs-1">Face Sheet</a></li>
		    
		    <li><a href="#tabs-2">Opportunities</a></li>
			<li><a href="#tabs-3">Observations</a></li>
		   
		 
		    </ul>
		    <div id="tabs-1">
		    	  
		    	<div id="faceTabs">
					  <ul>
					    <li><a href="#faceTabs-1">Allergies</a></li>
					    <li><a href="#faceTabs-2">Prevention and Screening</a></li>
					    <li><a href="#faceTabs-3">Medications</a></li>
					    <li><a href="#faceTabs-4">Utilization</a></li>
					    <li><a href="#faceTabs-5">Programs</a></li>
					    <li><a href="#faceTabs-6">Social</a></li>
					    <li><a href="#faceTabs-7">Vitals</a></li>
					    <li><a href="#faceTabs-8">Lab History</a></li>
					    <li><a href="#faceTabs-9">Geo Data</a></li>
					    
					  </ul>
					  <div id="faceTabs-1">
					  	<div id="allergiesDivRecent">
							<table id="allergiesAll" class="table table-bordered">
								<thead>
									  <tr>
										<th data-dynatable-column="allergy_text">Allergy</th>
										<th data-dynatable-column="allergy_added_by">Entered By</th>
										<th data-dynatable-column="allergy_date_added">Date Added</th>
									  </tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					  </div>
					  <div id="faceTabs-2">
					  	<div id="immunizationsDivRecent">
						<table id="immunizationsAll" class="table table-bordered">
							<thead>
								  <tr>
									<th data-dynatable-column="immunizations_description">Description</th>
									<th data-dynatable-column="immunizations_rendering_provider">Rendering Provider</th>
									<th data-dynatable-column="immunizations_date">Date Added</th>
									<th data-dynatable-column="immunizations_received_location">Location</th>
									<th data-dynatable-column="immunizations_entered_by">Entered By</th>
									<th data-dynatable-column="immunizations_source">Source</th>
								  </tr>
							</thead>
							<tbody>
							</tbody>
						</table>
					</div>
					
					  </div>
					  <div id="faceTabs-3">
					     
							<div id="rxDiv" style="display:block">
								<table id="rx" class="table table-bordered">
								  <thead>
								  <tr>
								  	
								    <th data-dynatable-column="drug_name" >Drug Name</th>
							      
							   		<th data-dynatable-column="description" >Details</th>
								     
								     <th data-dynatable-column="dateEnteredFormatted" data-dynatable-sorts="dateEnteredTime">From Date</th>
								     <th data-dynatable-column="provider">Ordering Provider</th>
							   		<th data-dynatable-column="source" >Source</th>
			     					<th data-dynatable-column="current" style="text-align:center">Currently Taking</th>
			     					<th style="display:none">dateEnteredTime</th>
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
					  </div>
					  <div id="faceTabs-4">
					     	<h4 class="minusHistory" style="display:none"><span class="symbol" >-</span> Chronic Conditions</h4>
							<h4 class="plusHistory" ><span class="symbol" >+</span> Chronic Conditions </h4>
							<div id="chronicDiv" style="display:none">
								<table id="chronic" class="table table-bordered">
								  <thead>
								  <tr>
								  	<th data-dynatable-column="claimDateFormatted"  data-dynatable-sorts="claimDate">Claim Date</th>
								   <th data-dynatable-column="providerName" >Provider </th>
								   <th data-dynatable-column="diagnosis" >Diagnosis </th>
								   <th data-dynatable-column="dxorder" >Diagnosis Type </th>
								      <th data-dynatable-column="posDesc" >POS </th>
								      <th data-dynatable-column="providerDesc" >Provider Type </th>
								     
								      <th style="display:none">claimDate</th>
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
						<h4 class="minusHistory" style="display:none"><span class="symbol" >-</span> Mental Health</h4>
							<h4 class="plusHistory" ><span class="symbol" >+</span> Mental Health </h4>
							<div id="mentalDiv" style="display:none">
								<table id="mental" class="table table-bordered">
								  <thead>
								  <tr>
								  <th data-dynatable-column="claimDatFromFormatted"  data-dynatable-sorts="claimDatFrom">From Date</th>
								  
								  	<th data-dynatable-column="diag" >Diagnosis: Category</th>
								     <th data-dynatable-column="provider" >Provider</th>
								      <th data-dynatable-column="providerType" >Provider Type</th>
								    <th data-dynatable-column="pos" >Place of Service</th>
								   <th style="display:none">claimDatFrom</th>
								
								   
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
						<h4 class="minusHistory" style="display:none"><span class="symbol" >-</span> Emergency Department</h4>
							<h4 class="plusHistory" ><span class="symbol" >+</span> Emergency Department </h4>
							<div id="erUtilDiv" style="display:none">
								<table id="erUtil" class="table table-bordered">
								  <thead>
								  <tr>
								  <th data-dynatable-column="claimDatFromFormatted"  data-dynatable-sorts="claimDatFrom">From Date</th>
								  <th data-dynatable-column="claimDateThruFormatted"  data-dynatable-sorts="claimDateThru">Thru Date</th>
								  	<th data-dynatable-column="diag" >Diagnosis</th>
								     <th data-dynatable-column="facility" >Facility</th>
								      <th data-dynatable-column="attending" >Attending Provider</th>
								    
								   <th style="display:none">claimDatFrom</th>
								   <th style="display:none">claimDateThru</th>
								   
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
					     
					     <h4 class="minusHistory" style="display:none"><span class="symbol" >-</span> Inpatient</h4>
							<h4 class="plusHistory" ><span class="symbol" >+</span> Inpatient </h4>
							<div id="admitsDiv" style="display:none">
								<table id="admits" class="table table-bordered">
								  <thead>
								  <tr>
								  	<th data-dynatable-column="fromDate" >From Date</th>
								     <th data-dynatable-column="thruDate" >Thru Date</th>
								      <th data-dynatable-column="facDesc" >Facility</th>
								      <th data-dynatable-column="facCity" >City</th>
								      <th data-dynatable-column="facState" >State</th>
								   <th data-dynatable-column="attendDesc" >Attending Provider</th>
								   
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
							 <h4 class="minusHistory" style="display:none"><span class="symbol" >-</span> Admits, Discharges and Transfers</h4>
							<h4 class="plusHistory" ><span class="symbol" >+</span> Admits, Discharges and Transfers </h4>
							<div id="eventsDiv" style="display:none">
								<table id="events" class="table table-bordered">
								  <thead>
								  <tr>
								  	<th data-dynatable-column="observeDateFormatted" data-dynatable-sorts="observeDate" >From Date</th>
								     <th data-dynatable-column="descriptionLink" data-dynatable-sorts="description" >Event</th>
								      <th data-dynatable-column="facility" >Facility</th>
									 
								   <th style="display:none">observeDate</th>
								   <th style="display:none">"description"</th>
								   
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
					    	<h4 class="minusHistory" style="display:none"><span class="symbol" >-</span> Doctor Visits</h4>
							<h4 class="plusHistory" ><span class="symbol" >+</span> Doctor Visits </h4>
							<div id="visitsDiv" style="display:none">
								<table id="visits" class="table table-bordered">
								  <thead>
								  <tr>
								  	<th data-dynatable-column="fromDate" >From Date</th>
								   
								      <th data-dynatable-column="name" >Provider </th>
								      <th data-dynatable-column="providerCity" >City </th>
								      <th data-dynatable-column="providerState" >State </th>
								   		<th data-dynatable-column="description" >Specialty</th>
								  </tr>
								  </thead>
								  <tbody>
								  </tbody>
								</table>
							</div>
							<div id="chartContainer" style="height: 400px"></div>
					  </div>
					  <div id="faceTabs-5">
					   
					    	<h4>Enrolled in Healthmap's Chronic Kidney Disease Program</h4>
					    	<h4><strong>Current Status: In Program </h4>
					    	<h4><strong>Priority: </strong>1- High Risk</h4>
					  
					  </div>
					  <div id="faceTabs-6">
					     <h4>No data to report on at this time</h4>
					  </div>
					  <div id="faceTabs-7">
					 	 <div id="measurementsDivAll" >
							<table id="measurementsTableAll" class="table table-bordered">
								<thead>
									  <tr>
										<th data-dynatable-column="systolicBP">Systolic BP</th>
										<th data-dynatable-column="diastolicBP">Diastolic BP</th>
										<th data-dynatable-column="pulse">Pulse</th>
										<th data-dynatable-column="temperature">Temperature</th>
										<th data-dynatable-column="height">Height</th>
										<th data-dynatable-column="weight">Weight</th>
										<th data-dynatable-column="bmi">BMI</th>
										<th data-dynatable-column="waist">Waist Circumference</th>
										<th data-dynatable-column="enteredBy">Entered By</th>
										<th data-dynatable-column="dateAdded">Date Added</th>
									  </tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>
					  </div>
					   <div id="faceTabs-8">
					   	<div id="labHistoryDiv">
							<table id="labHistory" class="table table-bordered">
							  <thead>
							  <tr>

							    <th data-dynatable-column="claimDateFormatted"  data-dynatable-sorts="claimDate">Claim Date</th>

									<th data-dynatable-column="cpt" >CPT Code</th>
									<th data-dynatable-column="description" >Lab Description</th>

									<th data-dynatable-column=provider >Ordering Provider</th>
									<th style="display:none">claimDate</th>
							  </tr>
							  </thead>
							  <tbody>
							  </tbody>
							</table>
						</div>
					   </div>
					   <div id="faceTabs-9">
					   	 <div id="right-panel"></div>
						<div id="map"></div>
		   				</div>
					 
					</div>
	
		    
			</div>

		
		    <div id="tabs-2">
		   	 	<h4 class="minusHistory" ><span class="symbol" >-</span> Medical</h4>
				<h4 class="plusHistory" style="display:none"><span class="symbol" >+</span> Medical </h4>
				<div id="medInterventionsDiv" style="display:block">
					
					<h4 class="opportunityHeader"><strong>Labs</strong></h4>
				
					<table id="labs" class="table table-bordered">
					  <thead>
					  <tr>
					  	
					       <th data-dynatable-column="detail" >Lab Test</th>
					       
					      <th data-dynatable-column="dateAdded" data-dynatable-sorts="dateAddedTime">Date First Identified</th>

					      <th data-dynatable-column="dropDown" >Status</th>
					     <th data-dynatable-column="closeDropDown" >Reason</th>
					      <th style="display:none">dateAddedTime</th>
					   
					  </tr>
					  </thead>
					  <tbody>
					  </tbody>
					</table>
					
					<h4 class="opportunityHeader"><strong>Referrals</strong></h4>
					
					<table id="referrals" class="table table-bordered">
					  <thead>
					  <tr>
					  	
					       <th data-dynatable-column="subCategory" >Referral Type Suggested</th>
					        <th data-dynatable-column="guidance" >Guidance</th>
					      <th data-dynatable-column="dateAdded" data-dynatable-sorts="dateAddedTime">Date First Identified</th>

					      <th data-dynatable-column="dropDown" >Status</th>
					     <th data-dynatable-column="closeDropDown" >Reason</th>
					      <th style="display:none">dateAddedTime</th>
					   
					  </tr>
					  </thead>
					  <tbody>
					  </tbody>
					</table>
					
					<h4 class="opportunityHeader"><strong>Medication Avoid</strong></h4>

					<table id="avoid" class="table table-bordered">
					  <thead>
					  <tr>
					  	
					       <th data-dynatable-column="drugName" >Avoid Drug Name</th>
					       <th data-dynatable-column="drugDate" >Date Prescribed</th>
					      <th data-dynatable-column="dateAdded" data-dynatable-sorts="dateAddedTime">Date First Identified</th>
					   
					      <th data-dynatable-column="dropDown" >Status</th>
					     <th data-dynatable-column="closeDropDown" >Reason</th>
					      <th style="display:none">dateAddedTime</th>
					   
					  </tr>
					  </thead>
					  <tbody>
					  </tbody>
					</table>
					
					
					
					
					<h4 class="opportunityHeader"><strong>Medication Adherence</strong></h4>

					<table id="adherence" class="table table-bordered">
					  <thead>
					  <tr>
					  	
					    
					       <th data-dynatable-column="detail" >Drug Class</th>
					      
					       <th data-dynatable-column="drugName" >Most Recent Non-Adherent Drug Name</th>
					       <th data-dynatable-column="drugDate" >Date Prescribed</th>
					      <th data-dynatable-column="dateAdded" data-dynatable-sorts="dateAddedTime">Date First Identified</th>
					   
					      <th data-dynatable-column="dropDown" >Status</th>
					     <th data-dynatable-column="closeDropDown" >Reason</th>
					      <th style="display:none">dateAddedTime</th>
					   
					  </tr>
					  </thead>
					  <tbody>
					  </tbody>
					</table>
				
				
				</div>
				
		    	
		    	<h4 class="minusHistory" ><span class="symbol" >-</span> Care Management </h4>
				<h4 class="plusHistory" style="display:none"><span class="symbol" >+</span> Care Management </h4>
			   	 <div id="careCoordinationDiv" style="display:block">
			   	 <table id="careCoordination" class="table table-bordered">
					  <thead>
					  <tr>
					  	
					       <th data-dynatable-column="text" >Intervention</th>
					       
					      <th data-dynatable-column="ack" data-dynatable-sorts="ackValue" style="text-align:center">Acknowledged</th>
					      <th data-dynatable-column="action" data-dynatable-sorts="actionValue">Action Taken</th>
					     
					      <th style="display:none">ackValue</th>
					      <th style="display:none">actionValue</th>
					   
					  </tr>
					  </thead>
					  <tbody>
					  </tbody>
					</table>
					</div>
			   
		    	<h4 class="minusHistory" ><span class="symbol" >-</span> Risk</h4>
				<h4 class="plusHistory" style="display:none"><span class="symbol" >+</span> Risk </h4>
     			
				<div id="hccDiv" style="display:block">
				<p style="font-size: 14px;">The HCC Codes below were assigned to this patient in prior years and have not yet been assigned during this calendar year according to available claims data. Please review this patient to determine if it is appropriate to submit a claim during this calendar year reflecting these conditions. This can be achieved by correcting a prior claim during this calendar year, or during the patient&#39;s next office visit. </p>
	 			<p style="font-size: 14px;"><strong>Note:</strong> Data is based on the most recent available claims data.</p>	 
		  		
				<table id="hcc" class="table table-bordered">
				  <thead>
			  	<tr>
			  	
			     <th data-dynatable-column="fullHCC" data-dynatable-sorts="hcc_cat">Hierarchical Condition Category (HCC)</th>
			       <th data-dynatable-column="fullDiag" >Prior Year Diagnosis Code</th>
			        <th data-dynatable-column="maxDiagDate" data-dynatable-sorts="maxDiagDateTime">Most Recent Diagnosis Date</th>
			 <th data-dynatable-column="icd10" >Current Year Diagnosis Code <br><span style="font-size:8pt">Possible code(s) subject to review</span></th>
			       <th style="display:none">maxDiagDateTime</th>
			       <th style="display:none">hcc_cat</th>
			  </tr>
			  </thead>
			  <tbody>
			  </tbody>
			</table>
			</div>
			    </div>
	        <div id="tabs-3">
			<table id="observationTable" class="table table-bordered">
				  <thead>
				  <tr>
				  	 
				     
				     <th data-dynatable-column="effectiveDateTime" >Date</th>
				    <th data-dynatable-column="category" >Category </th>
				 
				   	 
				   	 <th data-dynatable-column="code" >Code</th>
				     
				       <th data-dynatable-column="interpretation">Interpretation</th>
				     <th data-dynatable-column="value" >Value</th>
					  <th data-dynatable-column="units" >Units</th>
				  
				  </tr>
				  </thead>
				  <tbody>
				  </tbody>
				</table>
			
			
	      </div>
	
</div>
    </div>
 
	  
    <script src='./lib/es6-shim-0.35.1.min.js'></script>
    <script src='./src/js/example-smart-app.js'></script>
    
    <script src='./lib/fhir-client-v0.1.11.js'></script>

    <!-- Prevent session bleed caused by single threaded embedded browser and sessionStorage API -->
    <!-- https://github.com/cerner/fhir-client-cerner-additions -->
    <script src='./lib/fhir-client-cerner-additions-1.0.0.js'></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
	      <script src='./src/js/jquery.stickytableheaders.min.js'></script>
    <script src='./src/js/jquery.dynatable.js'></script>
	    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyBjm5_EOpOeXnu01BNO5aPaJ_p3_E05Vig"></script>
    
    <script src='./src/js/map-icons.js'></script> 
    <script src='./src/js/highcharts.js'></script>
    <script>
      extractData().then(
        //Display Patient Demographics and Observations if extractData was success
        function(p) {
          drawVisualization(p);
		
	  $('#observationTable').dynatable({
		  dataset: {
				
				records: observationJSON.list
				},
			
			
				features: {
				paginate: false,
				search: true,
				sort: true,
				pushState: false 
				}
			});
    
        },

        //Display 'Failed to call FHIR Service' if extractData failed
        function() {
          $('#loading').hide();
          $('#errors').html('<p> Failed to call FHIR Service </p>');
        }
      );
     $(document).ready(function(){    
	    $('#tabs').tabs();
	    $( "#faceTabs" ).tabs().addClass( "ui-tabs-vertical ui-helper-clearfix" );
	    $( "#faceTabs li" ).removeClass( "ui-corner-top" ).addClass( "ui-corner-left" );
	 
    
    $('.minusHistory').click(function(){
		$(this).next().next('div').slideToggle("fast");
		
		$(this).hide();
		$(this).next().show();
	});
	
	$('.plusHistory').click(function(){
		$('.minusHistory').each(function(){
			
			if ( $(this).is(':visible') )
			{
				$(this).next().next('div').slideToggle("fast");
				
				$(this).hide();
				$(this).next().show();
			}
			
		});
		
		$(this).next('div').slideToggle("slow");
		$(this).hide();
		$(this).prev().show();
		
		
	});
	$('#allergiesAll').dynatable({
		  dataset: {
		
			records: allergiesAllJSON.allergies
			},
	
			features: {
			paginate: false,
			search: false,
			sort: true,
			pushState: false 
			}
		});	
	     
	$('#immunizationsAll').dynatable({
		  dataset: {
		
			records: immunizationsAllJSON.immunizations
			},
	
			features: {
			paginate: false,
			search: false,
			sort: true,
			pushState: false 
			}
		});
	     
	$('#labHistory').dynatable({
		  dataset: {
			  sorts: { 'claimDate': -1 },
				records: labJSON.list
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: true,
				pushState: false 
				}
			});
	if ( labJSON.list.length > 10)
	{
		$('#labHistoryDiv').css({height:"400px",overflow:"auto"});
		$('#labHistory').stickyTableHeaders({ scrollableArea: $('#labHistoryDiv')[0], "fixedOffset": 0 });
		
	}
	     
	$('#measurementsTableAll').dynatable({
		  dataset: {
		
			records: measurementsAllJSON.vitals
			},
	
			features: {
			paginate: false,
			search: false,
			sort: true,
			pushState: false 
			}
		});	
	     
	 
	
	$('#referrals').dynatable({
		  dataset: {
				
				records: progInterventions.referral
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: false,
				pushState: false 
				}
			});
	$('#interaction').dynatable({
		  dataset: {
				
				records: progInterventions.interaction
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: false,
				pushState: false 
				}
			});
	$('#labs').dynatable({
		  dataset: {
				
				records: progInterventions.labs
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: false,
				pushState: false 
				}
			});
	$('#adherence').dynatable({
		  dataset: {
				
				records: progInterventions.adherence
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: false,
				pushState: false 
				}
			});
	$('#avoid').dynatable({
		  dataset: {
				
				records: progInterventions.avoid
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: false,
				pushState: false 
				}
			});
	
	$('#careCoordination').dynatable({
		  dataset: {
				
				records: cpInterventions.list
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: true,
				pushState: false 
				}
			});
	
	$('#duplicate').dynatable({
		  dataset: {
				
				records: progInterventions.duplicate
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: false,
				pushState: false 
				}
			});
	
	$('.medRec').attr("disabled", true);
	$('.adherence').attr("disabled", true);
	$('.discrepancy').attr("disabled", true);
	
	$('#hcc').dynatable({
		  dataset: {
			  sorts: { 'hcc_cat': 1, 'maxDiagDateTime': -1 },
				records: hccJson.list
				},
			
			
				features: {
				paginate: false,
				search: false,
				sort: true,
				pushState: false 
				}
			});
	
	
	$('#rx').dynatable({
		  dataset: {
		
			records: manualMedsJson.listAll
			},
		
		
			features: {
			paginate: false,
			search: false,
			sort: false,
			pushState: false 
			}
		});
		
	if ( manualMedsJson.listAll.length > 7)
	{
		$('#rxDiv').css({height:"300px",overflow:"auto"});
		$('#rx').stickyTableHeaders({ scrollableArea: $('#rxDiv')[0], "fixedOffset": 0 });
	}
	
	$('#rx').find('.medRec').attr('disabled', true);
	
	$('#chronic').dynatable({
		  dataset: {
		
			records: chronic.list
			},
		
		
			features: {
			paginate: false,
			search: false,
			sort: false,
			pushState: false 
			}
		});
		
	if ( chronic.list.length > 7)
	{
		$('#chronicDiv').css({height:"250px",overflow:"auto"});
		$('#chronic').stickyTableHeaders({ scrollableArea: $('#chronicDiv')[0], "fixedOffset": 0 });
		
	}
	
	$('#mental').dynatable({
		  dataset: {
		
			records: mental.list
			},
		
		
			features: {
			paginate: false,
			search: false,
			sort: false,
			pushState: false 
			}
		});
		
	if ( mental.list.length > 7)
	{
		$('#mentalDiv').css({height:"250px",overflow:"auto"});
		$('#mental').stickyTableHeaders({ scrollableArea: $('#mentalDiv')[0], "fixedOffset": 0 });
		
	}
	
	$('#erUtil').dynatable({
		  dataset: {
		
			records: erUtil.list
			},
		
		
			features: {
			paginate: false,
			search: false,
			sort: false,
			pushState: false 
			}
		});
		
	if ( erUtil.list.length > 7)
	{
		$('#erUtilDiv').css({height:"250px",overflow:"auto"});
		$('#erUtil').stickyTableHeaders({ scrollableArea: $('#erUtilDiv')[0], "fixedOffset": 0 });
		
	}
	
	$('#events').dynatable({
		  dataset: {
			  sorts: { 'observationDate': -1 },
			records: events.list
			},
		
		
			features: {
			paginate: false,
			search: false,
			sort: true,
			pushState: false 
			}
		});
		
	if ( events.list.length > 7)
	{
		$('#eventsDiv').css({height:"250px",overflow:"auto"});
		$('#events').stickyTableHeaders({ scrollableArea: $('#eventsDiv')[0], "fixedOffset": 0 });
	}
	
$('#admits').dynatable({
	  dataset: {
	
		records: admits.list
		},
	
	
		features: {
		paginate: false,
		search: false,
		sort: false,
		pushState: false 
		}
	});
	
if ( admits.list.length > 7)
{
	$('#admitsDiv').css({height:"250px",overflow:"auto"});
	$('#admist').stickyTableHeaders({ scrollableArea: $('#admitsDiv')[0], "fixedOffset": 0 });
}
	
$('#visits').dynatable({
	  dataset: {
	
		records: visits.list
		},
	
	
		features: {
		paginate: false,
		search: false,
		sort: false,
		pushState: false 
		}
	});
	
	if ( visits.list.length > 7)
	{
		$('#visitsDiv').css({height:"250px",overflow:"auto"});
		$('#visits').stickyTableHeaders({ scrollableArea: $('#visitsDiv')[0], "fixedOffset": 0 });
		
	}
	     
	    
     });
    </script>
    <script>
	    Highcharts.chart("chartContainer",{chart:{type:"area",zoomType:"x",panning:true,panKey:"shift",width:1000},title:{text:"Spend Over Time For Patient MALLER, RONALD"},annotations:[{labels:[{point:{xAxis:0,yAxis:0,x:Date.UTC(2014,5,17),y:17176.92},x:-30,text:"Other complications due to<br>other cardiac device, implant,<br>and graft "},{point:{xAxis:0,yAxis:0,x:Date.UTC(2015,-1,30),y:4849.69},x:-30,text:"Acute kidney failure, unspecified<br>"},{point:{xAxis:0,yAxis:0,x:Date.UTC(2017,5,11),y:18533.44},x:-30,text:"Other pulmonary embolism without<br>acute cor pulmonale "},]}],xAxis:{type:"datetime",dateTimeLabelFormats:{month:"%b",year:"%b"},plotBands:[{from:Date.UTC(2014,0,1),to:Date.UTC(2014,11,31),color:"gray",label:{text:"<strong>2014<br>($19,439.17)</strong>",style:{color:"white"}}},{from:Date.UTC(2015,0,1),to:Date.UTC(2015,11,31),color:"lightgray",label:{text:"<strong>2015<br>($6,997.86)</strong>",style:{color:"white"}}},{from:Date.UTC(2016,0,1),to:Date.UTC(2016,11,31),color:"gray",label:{text:"<strong>2016<br>($3,497.05)</strong>",style:{color:"white"}}},{from:Date.UTC(2017,0,1),to:Date.UTC(2017,11,31),color:"lightgray",label:{text:"<strong>2017<br>($19,935.57)</strong>",style:{color:"white"}}},]},yAxis:{title:{text:"Paid Dollars"},labels:{formatter:function(){var a=this.axis.defaultLabelFormatter.call(this);if(/^[0-9]{4}$/.test(a)){return"$"+Highcharts.numberFormat(this.value,0,".",",")}return"$"+a}},min:0,max:30000},tooltip:{headerFormat:"<strong>{series.name}</strong><br>",pointFormat:"{point.x: %b %e} - ${point.y: .2f} "},plotOptions:{spline:{marker:{enabled:true}}},legend:{enabled:false},series:[{name:"Spend",marker:{enabled:false},data:[[Date.UTC(2014,-1,7),5.26],[Date.UTC(2014,0,6),5.26],[Date.UTC(2014,1,14),70.42],[Date.UTC(2014,2,10),84.33],[Date.UTC(2014,2,14),20.73],[Date.UTC(2014,2,17),70.38],[Date.UTC(2014,2,25),20.73],[Date.UTC(2014,3,20),79.03999999999999],[Date.UTC(2014,3,27),86.89],[Date.UTC(2014,3,28),370.75000000000006],[Date.UTC(2014,3,29),167.45],[Date.UTC(2014,4,3),20.73],[Date.UTC(2014,4,10),20.73],[Date.UTC(2014,4,17),84.33],[Date.UTC(2014,4,24),20.73],[Date.UTC(2014,5,7),20.73],[Date.UTC(2014,5,9),84.33],[Date.UTC(2014,5,14),84.33],[Date.UTC(2014,5,15),20.73],[Date.UTC(2014,5,17),17176.92],[Date.UTC(2014,5,23),121.53],[Date.UTC(2014,5,24),84.33],[Date.UTC(2014,5,29),20.73],[Date.UTC(2014,6,5),20.73],[Date.UTC(2014,6,6),84.33],[Date.UTC(2014,6,13),34.05],[Date.UTC(2014,6,19),20.73],[Date.UTC(2014,6,20),34.05],[Date.UTC(2014,7,2),20.73],[Date.UTC(2014,7,16),20.73],[Date.UTC(2014,8,6),104.43],[Date.UTC(2014,8,14),20.73],[Date.UTC(2014,8,27),84.33],[Date.UTC(2014,9,14),141.1],[Date.UTC(2014,9,26),20.73],[Date.UTC(2014,10,5),20.73],[Date.UTC(2014,10,10),70.38],[Date.UTC(2015,-1,5),15.72],[Date.UTC(2015,-1,30),4849.69],[Date.UTC(2015,0,2),399.8],[Date.UTC(2015,0,4),93.58],[Date.UTC(2015,0,11),102.78999999999999],[Date.UTC(2015,0,17),93.58],[Date.UTC(2015,1,17),214.08999999999997],[Date.UTC(2015,1,19),21.369999999999997],[Date.UTC(2015,2,1),21.369999999999997],[Date.UTC(2015,2,15),125.28],[Date.UTC(2015,3,1),5.24],[Date.UTC(2015,3,18),93.58],[Date.UTC(2015,3,29),84.22],[Date.UTC(2015,4,17),69.25999999999999],[Date.UTC(2015,4,18),21.369999999999997],[Date.UTC(2015,5,17),21.439999999999998],[Date.UTC(2015,6,18),94.02],[Date.UTC(2015,6,26),69.6],[Date.UTC(2015,7,18),62.300000000000004],[Date.UTC(2015,8,2),21.439999999999998],[Date.UTC(2015,8,16),21.439999999999998],[Date.UTC(2015,8,26),84.64],[Date.UTC(2015,8,29),69.6],[Date.UTC(2015,9,18),94.02],[Date.UTC(2015,10,7),84.64],[Date.UTC(2015,10,17),163.77999999999997],[Date.UTC(2016,-1,14),5.25],[Date.UTC(2016,-1,18),205.45],[Date.UTC(2016,0,8),89.31],[Date.UTC(2016,1,8),20.64],[Date.UTC(2016,1,9),1014.0699999999999],[Date.UTC(2016,1,11),67.36],[Date.UTC(2016,1,25),20.64],[Date.UTC(2016,2,8),20.64],[Date.UTC(2016,2,14),15.39],[Date.UTC(2016,2,15),105.52000000000001],[Date.UTC(2016,2,19),176.62],[Date.UTC(2016,2,28),257.71000000000004],[Date.UTC(2016,3,6),20.64],[Date.UTC(2016,3,13),67.36],[Date.UTC(2016,3,23),89.31],[Date.UTC(2016,4,3),84.06],[Date.UTC(2016,4,27),20.64],[Date.UTC(2016,5,15),67.36],[Date.UTC(2016,5,20),80.47],[Date.UTC(2016,6,25),89.31],[Date.UTC(2016,7,19),122.13000000000001],[Date.UTC(2016,7,23),20.64],[Date.UTC(2016,7,26),54.77],[Date.UTC(2016,8,21),71.39],[Date.UTC(2016,9,15),110.31],[Date.UTC(2016,9,23),89.31],[Date.UTC(2016,9,28),388.04],[Date.UTC(2016,10,19),102.07000000000001],[Date.UTC(2016,10,21),20.64],[Date.UTC(2017,-1,4),5.28],[Date.UTC(2017,0,1),5.28],[Date.UTC(2017,0,22),44.5],[Date.UTC(2017,1,22),20.94],[Date.UTC(2017,2,3),155.31],[Date.UTC(2017,2,5),133.85999999999999],[Date.UTC(2017,2,10),105.37],[Date.UTC(2017,2,26),20.94],[Date.UTC(2017,3,1),102.45],[Date.UTC(2017,3,8),20.94],[Date.UTC(2017,3,17),20.94],[Date.UTC(2017,3,24),102.45],[Date.UTC(2017,4,8),20.94],[Date.UTC(2017,4,9),65.6],[Date.UTC(2017,4,21),84.43],[Date.UTC(2017,4,30),89.71000000000001],[Date.UTC(2017,5,11),18533.44],[Date.UTC(2017,5,17),42.25],[Date.UTC(2017,5,27),84.43],[Date.UTC(2017,5,31),261.51],[Date.UTC(2017,6,2),15],]}]});
	    </script>
  </body>
</html>
